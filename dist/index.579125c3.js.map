{"mappings":"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","sources":["src/index.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n\r\n    class Gallery {\r\n        constructor() {\r\n            this.columns = 5\r\n            this.heightGallery = 0\r\n\r\n            this.items = [...document.querySelectorAll('.gallery__item')]\r\n            this.widthItem = 0\r\n            this.heightItem = 0\r\n\r\n            this.currentItem = this.items[0]\r\n\r\n            this.listeners()\r\n            this.setItemsWidth()\r\n            this.setItemsPosition()\r\n        }\r\n\r\n        listeners() {\r\n            window.addEventListener('resize', () => {\r\n                this.checkScreen()\r\n                this.setItemsWidth()\r\n                this.setItemsPosition()\r\n            })\r\n\r\n            this.items.forEach(item => {\r\n                item.addEventListener('mouseenter', event => {\r\n                    this.currentItem = item\r\n                })\r\n                item.addEventListener('touchstart', event => {\r\n                    this.currentItem = item\r\n                })\r\n            })\r\n\r\n            window.addEventListener('wheel', event => {\r\n                const vector = event.deltaY === 100 ? 1 : 0\r\n\r\n                for (let i = 0; i < this.columns; i++) {\r\n                    const type = this.currentItem.dataset.index\r\n                    const sibling = i + 1 - type\r\n                    let step\r\n\r\n                    switch(sibling) {\r\n                        case 1:\r\n                            step = 18\r\n                            break;\r\n                        case -1:\r\n                            step = 18\r\n                            break;\r\n                        case 2:\r\n                            step = 12\r\n                            break;\r\n                        case -2:\r\n                            step = 12\r\n                            break;\r\n                        case 3:\r\n                            step = 9\r\n                            break;\r\n                        case -3:\r\n                            step = 9\r\n                            break;\r\n                        case 4:\r\n                            step = 7\r\n                            break;\r\n                        case -4:\r\n                            step = 7\r\n                            break;\r\n                    }\r\n\r\n                    if (sibling === 0) {\r\n                        this.moveItems(type, vector)\r\n                    } else {\r\n                        this.moveItems(+type + sibling, vector, step)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        checkScreen() {\r\n            const width = window.innerWidth\r\n            if (width >= 1200) {\r\n                this.columns = 5\r\n            } else if (width < 1200 && width >= 1024) {\r\n                this.columns = 4\r\n            } else if (width < 1024 && width >= 768) {\r\n                this.columns = 3\r\n            } else {\r\n                this.columns = 2\r\n            }\r\n        }\r\n\r\n        moveItems(type, vector, step = 36) {\r\n            const groupItems = this.items.filter(item => item.dataset.index == type)\r\n            const end = this.heightGallery - window.innerHeight\r\n\r\n            groupItems.forEach((item, index) => {\r\n                let stop = false\r\n                let y = +item.dataset.currenty\r\n\r\n                if (vector) {\r\n                    if (+item.dataset.to - step <= +item.dataset.starty - end) {\r\n                        item.dataset.to = +item.dataset.starty - end\r\n                    } else {\r\n                        item.dataset.to = +item.dataset.to - step\r\n                    }\r\n\r\n                    let n = 1\r\n                    while (n < step) {\r\n                        if (y <= +item.dataset.starty - end) {\r\n                            y = +item.dataset.starty - end\r\n                            item.dataset.currenty = +Number(y).toFixed(5)\r\n                            item.style.transform = `translate3d(${item.dataset.startx}px, ${y}px, 1px)`\r\n                            stop = true\r\n                        }\r\n                        n++\r\n                    }\r\n                    if (!stop) {\r\n                        this.animate(item, {\r\n                            duration: 700,\r\n                            timing: this.makeEaseInOut,\r\n                            draw: function(progress) {\r\n                                const value = +Number(y - step * progress).toFixed(5)\r\n                                if (value <= +item.dataset.starty - end) {\r\n                                    item.dataset.currenty = +item.dataset.starty - end\r\n                                    item.style.transform = `translate3d(${item.dataset.startx}px, ${+item.dataset.starty - end}px, 1px)`\r\n                                } else {\r\n                                    item.dataset.currenty = value\r\n                                    item.style.transform = `translate3d(${item.dataset.startx}px, ${value}px, 1px)`\r\n                                }\r\n                            }.bind(this)\r\n                        })\r\n                    }\r\n                } else {\r\n                    if (+item.dataset.to + step >= +item.dataset.starty) {\r\n                        item.dataset.to = item.dataset.starty\r\n                    } else {\r\n                        item.dataset.to = +item.dataset.to + step\r\n                    }\r\n\r\n                    let n = 1\r\n                    while (n < step) {\r\n                        if (y >= +item.dataset.starty) {\r\n                            y = +item.dataset.starty\r\n                            item.dataset.currenty = +Number(y).toFixed(5)\r\n                            item.style.transform = `translate3d(${item.dataset.startx}px, ${y}px, 1px)`\r\n                            stop = true\r\n                        }\r\n                        n++\r\n                    }\r\n                    if (!stop) {\r\n                        this.animate(item, {\r\n                            duration: 700,\r\n                            timing: this.makeEaseInOut,\r\n                            draw: function(progress) {\r\n                                const value = +Number(y + step * progress).toFixed(5)\r\n                                if (value >= +item.dataset.starty) {\r\n                                    item.dataset.currenty = +item.dataset.starty\r\n                                    item.style.transform = `translate3d(${item.dataset.startx}px, ${+item.dataset.starty}px, 1px)`\r\n                                } else {\r\n                                    item.dataset.currenty = value\r\n                                    item.style.transform = `translate3d(${item.dataset.startx}px, ${value}px, 1px)`\r\n                                }\r\n                            }.bind(this)\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        setItemsWidth() {\r\n            const screenWidth = window.innerWidth\r\n            this.widthItem = +Number(screenWidth / this.columns).toFixed(5)\r\n\r\n            this.items.forEach(item => {\r\n                item.style.width = `${this.widthItem}px`\r\n            })\r\n        }\r\n\r\n        setItemsPosition() {\r\n            let modWidth = 0\r\n            let modHeight = 0\r\n            let type = 0\r\n\r\n            const image = this.items[0].querySelector('.gallery__image')\r\n            this.heightItem = this.heightGallery = +Number(image.getBoundingClientRect().height).toFixed(5) \r\n\r\n            this.items.forEach((item, index) => {\r\n                ++type\r\n                if (modWidth === this.columns) {\r\n                    this.heightGallery += this.heightItem\r\n                    modWidth = 0\r\n                    ++modHeight\r\n                    type = 1\r\n                }\r\n\r\n                item.dataset.to = 0\r\n                item.dataset.index = type\r\n                item.dataset.startx = +Number(this.widthItem * modWidth).toFixed(5)\r\n                item.dataset.starty = +Number(this.heightItem * modHeight).toFixed(5)\r\n                item.dataset.currenty = +Number(this.heightItem * modHeight).toFixed(5)\r\n                item.style.transform = `translate3d(${this.widthItem * modWidth}px, ${this.heightItem * modHeight}px, 1px)`\r\n\r\n                ++modWidth\r\n            })\r\n        }\r\n\r\n        animate(el, {timing, draw, duration}) {\r\n    \r\n            let start = performance.now()\r\n    \r\n            requestAnimationFrame(function animate(time) {\r\n                // timeFraction изменяется от 0 до 1\r\n                let timeFraction = (time - start) / duration\r\n                if (timeFraction > 1) timeFraction = 1\r\n            \r\n                // вычисление текущего состояния анимации\r\n                let progress = timing(timeFraction)\r\n            \r\n                draw(progress) // отрисовать её\r\n            \r\n                if (timeFraction < 1) {\r\n                    requestAnimationFrame(animate)\r\n                } else {\r\n                    // finish\r\n                }\r\n          \r\n            })\r\n        }\r\n\r\n        makeEaseInOut(timeFraction) {\r\n            if (timeFraction < .5)\r\n                return 2 * timeFraction / 2\r\n            else\r\n                return (2 - 2 * (1 - timeFraction)) / 2\r\n        }\r\n    }\r\n\r\n    new Gallery()\r\n})\r\n"],"names":[],"version":3,"file":"index.579125c3.js.map","sourceRoot":"/__parcel_source_root/"}