{"mappings":"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","sources":["src/index.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n\r\n    class Gallery {\r\n        constructor() {\r\n            this.columns = 5\r\n            this.heightGallery = 0\r\n\r\n            this.items = [...document.querySelectorAll('.gallery__item')]\r\n\r\n            this.widthItem = 0\r\n            this.heightItem = 0\r\n\r\n            this.widthOpenedItem = 0\r\n            this.heightOpenedItem = 0\r\n\r\n            this.currentItem = this.items[0]\r\n\r\n            this.currentY = 0\r\n            this.wheelMod = 0\r\n\r\n            this.listeners()\r\n\r\n            this.checkScreen()\r\n            this.setItemsWidth()\r\n            this.setItemsPosition()\r\n        }\r\n\r\n        listeners() {\r\n            window.addEventListener('resize', () => {\r\n                this.checkScreen()\r\n                this.setItemsWidth()\r\n                this.setItemsPosition()\r\n            })\r\n\r\n            this.items.forEach(item => {\r\n                item.addEventListener('mouseenter', event => {\r\n                    this.currentItem = item\r\n                    this.setActiveItems(item.dataset.index)\r\n                })\r\n\r\n                item.addEventListener('mouseleave', event => {\r\n                    this.setActiveItems(null)\r\n                })\r\n\r\n                item.addEventListener('touchstart', event => {\r\n                    this.currentItem = item\r\n                    this.setActiveItems(item.dataset.index)\r\n                })\r\n\r\n                item.addEventListener('click', event => {\r\n                    if (!item.classList.contains('--open')) {\r\n                        this.openItems(item.dataset.index)\r\n                    } else {\r\n                        this.closeItems()\r\n                    }\r\n                })\r\n            })\r\n\r\n            window.addEventListener('touchstart', event => {\r\n                this.currentY = event.changedTouches[0].clientY\r\n            })\r\n\r\n            window.addEventListener('touchend', event => {\r\n                this.currentY = 0\r\n            })\r\n\r\n            window.addEventListener('touchmove', event => {\r\n                let range = 0\r\n                let vector = null\r\n                const y = event.changedTouches[0].clientY\r\n\r\n                this.currentY > y ? vector = 1 : vector = 0\r\n\r\n                if (vector) {\r\n                    range = this.currentY - y\r\n                } else {\r\n                    range = y - this.currentY\r\n                }\r\n\r\n                for (let i = 0; i < this.columns; i++) {\r\n                    const type = this.currentItem.dataset.index\r\n                    const sibling = i + 1 - type\r\n                    let step\r\n    \r\n                    switch(sibling) {\r\n                        case 0:\r\n                            step = +Number(+range / 1.5).toFixed(1)\r\n                            break;\r\n                        case 1:\r\n                            step = +Number(+range / 2).toFixed(1)\r\n                            break;\r\n                        case -1:\r\n                            step = +Number(+range / 2).toFixed(1)\r\n                            break;\r\n                        case 2:\r\n                            step = +Number(+range / 2.5).toFixed(1)\r\n                            break;\r\n                        case -2:\r\n                            step = +Number(+range / 2.5).toFixed(1)\r\n                            break;\r\n                        case 3:\r\n                            step = +Number(+range / 3).toFixed(1)\r\n                            break;\r\n                        case -3:\r\n                            step = +Number(+range / 3).toFixed(1)\r\n                            break;\r\n                        case 4:\r\n                            step = +Number(+range / 4).toFixed(1)\r\n                            break;\r\n                        case -4:\r\n                            step = +Number(+range / 4).toFixed(1)\r\n                            break;\r\n                    }\r\n    \r\n                    if (sibling === 0) {\r\n                        this.moveItems(type, vector, step)\r\n                    } else {\r\n                        this.moveItems(+type + sibling, vector, step)\r\n                    }\r\n                }\r\n            })\r\n\r\n            window.addEventListener('wheel', event => {\r\n                ++this.wheelMod\r\n                setTimeout(() => --this.wheelMod, 100)\r\n\r\n                const vector = event.deltaY > 0 ? 1 : 0\r\n\r\n                for (let i = 0; i < this.columns; i++) {\r\n                    const type = this.currentItem.dataset.index\r\n                    const sibling = i + 1 - type\r\n                    let step\r\n    \r\n                    switch(sibling) {\r\n                        case 0:\r\n                            step = 36\r\n                            break;\r\n                        case 1:\r\n                            step = 18\r\n                            break;\r\n                        case -1:\r\n                            step = 18\r\n                            break;\r\n                        case 2:\r\n                            step = 12\r\n                            break;\r\n                        case -2:\r\n                            step = 12\r\n                            break;\r\n                        case 3:\r\n                            step = 9\r\n                            break;\r\n                        case -3:\r\n                            step = 9\r\n                            break;\r\n                        case 4:\r\n                            step = 7\r\n                            break;\r\n                        case -4:\r\n                            step = 7\r\n                            break;\r\n                    }\r\n    \r\n                    if (sibling === 0) {\r\n                        this.moveItems(type, vector, step * this.wheelMod)\r\n                    } else {\r\n                        this.moveItems(+type + sibling, vector, step * this.wheelMod)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        openItems(index) {\r\n            this.setItemsWidth(index)\r\n            this.setItemsPosition(index)\r\n        }\r\n\r\n        closeItems() {\r\n            this.setItemsWidth()\r\n            this.setItemsPosition()\r\n        }\r\n\r\n        setItemsWidth(index = null) {\r\n            const screenWidth = window.innerWidth\r\n\r\n            this.widthItem = +Number(screenWidth / this.columns).toFixed(1)\r\n            this.widthOpenedItem = +Number(this.widthItem * 1.5).toFixed(1)\r\n\r\n            if (index) {\r\n                this.items.forEach(item => {\r\n                    if (item.dataset.index == index) {\r\n                        item.classList.add('--open')\r\n                        item.style.width = `${this.widthOpenedItem}px`\r\n                    } else {\r\n                        item.classList.remove('--open')\r\n                        item.style.width = `${this.widthItem}px`\r\n                    }\r\n                })\r\n            } else this.items.forEach(item => {\r\n                item.classList.remove('--open')\r\n                item.style.width = `${this.widthItem}px`\r\n            })\r\n        }\r\n\r\n        setItemsPosition(index = null) {\r\n            let modWidth = 0\r\n            let modHeight = 0\r\n            let type = 0\r\n\r\n            const image = this.items[0].querySelector('.gallery__image')\r\n            this.heightItem = this.heightGallery = +Number(image.getBoundingClientRect().height).toFixed(1)\r\n\r\n            this.items.forEach(item => {\r\n\r\n                ++type\r\n                if (modWidth === this.columns) {\r\n                    this.heightGallery += this.heightItem\r\n                    modWidth = 0\r\n                    ++modHeight\r\n                    type = 1\r\n                }\r\n\r\n                item.dataset.index = type\r\n\r\n                if (index && item.dataset.index == index) {\r\n                    const height = +Number(item.getBoundingClientRect().height).toFixed(1)\r\n                    height != this.heightOpenedItem ? this.heightOpenedItem = height : false\r\n\r\n                    item.dataset.starty = +Number(this.heightOpenedItem * modHeight).toFixed(1)\r\n                    item.dataset.currenty = +Number(this.heightOpenedItem * modHeight).toFixed(1)\r\n                    item.style.transform = `translate3d(${this.widthItem * modWidth}px, ${this.heightOpenedItem * modHeight}px, 1px)`\r\n                } else {\r\n                    item.dataset.starty = +Number(this.heightItem * modHeight).toFixed(1)\r\n                    item.dataset.currenty = +Number(this.heightItem * modHeight).toFixed(1)\r\n                    item.style.transform = `translate3d(${this.widthItem * modWidth}px, ${this.heightItem * modHeight}px, 1px)`\r\n                }\r\n\r\n                item.dataset.startx = +Number(this.widthItem * modWidth).toFixed(1)\r\n                \r\n                ++modWidth\r\n            })\r\n        }\r\n\r\n        moveItems(type, vector, step) {\r\n            const groupItems = this.items.filter(item => item.dataset.index == type)\r\n            const end = this.heightGallery - window.innerHeight\r\n\r\n            groupItems.forEach(item => {\r\n                let y = +item.dataset.currenty\r\n\r\n                if (vector) {\r\n                    this.animate(item, {\r\n                        duration: 400,\r\n                        timing: this.makeEaseInOut,\r\n                        draw: function(progress) {\r\n                            const value = +Number(y - step * progress).toFixed(1)\r\n                            if (value <= +item.dataset.starty - end) {\r\n                                item.dataset.currenty = +item.dataset.starty - end\r\n                                item.style.transform = `translate3d(${item.dataset.startx}px, ${+item.dataset.starty - end}px, 1px)`\r\n                            } else {\r\n                                item.dataset.currenty = value\r\n                                item.style.transform = `translate3d(${item.dataset.startx}px, ${value}px, 1px)`\r\n                            }\r\n                        }.bind(this)\r\n                    })\r\n                } else {\r\n                    this.animate(item, {\r\n                        duration: 400,\r\n                        timing: this.makeEaseInOut,\r\n                        draw: function(progress) {\r\n                            const value = +Number(y + step * progress).toFixed(1)\r\n                            if (value >= +item.dataset.starty) {\r\n                                item.dataset.currenty = +item.dataset.starty\r\n                                item.style.transform = `translate3d(${item.dataset.startx}px, ${+item.dataset.starty}px, 1px)`\r\n                            } else {\r\n                                item.dataset.currenty = value\r\n                                item.style.transform = `translate3d(${item.dataset.startx}px, ${value}px, 1px)`\r\n                            }\r\n                        }.bind(this)\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n        animate(el, {timing, draw, duration}) {\r\n    \r\n            let start = performance.now()\r\n    \r\n            requestAnimationFrame(function animate(time) {\r\n                // timeFraction изменяется от 0 до 1\r\n                let timeFraction = (time - start) / duration\r\n                if (timeFraction > 1) timeFraction = 1\r\n            \r\n                // вычисление текущего состояния анимации\r\n                let progress = timing(timeFraction)\r\n            \r\n                draw(progress) // отрисовать её\r\n            \r\n                if (timeFraction < 1) {\r\n                    requestAnimationFrame(animate)\r\n                } else {\r\n                    // finish\r\n                }\r\n            })\r\n        }\r\n\r\n        makeEaseInOut(timeFraction) {\r\n            if (timeFraction < .5)\r\n                return 2 * timeFraction / 2\r\n            else\r\n                return (2 - 2 * (1 - timeFraction)) / 2\r\n        }\r\n\r\n        setActiveItems(index) {\r\n            this.items.forEach(item => {\r\n                item.dataset.index == index ? \r\n                    item.classList.add('--active') : \r\n                    item.classList.remove('--active')\r\n            })\r\n        }\r\n\r\n        checkScreen() {\r\n            const width = window.innerWidth\r\n            if (width >= 1200) {\r\n                this.columns = 5\r\n            } else if (width < 1200 && width >= 1024) {\r\n                this.columns = 4\r\n            } else if (width < 1024 && width >= 768) {\r\n                this.columns = 3\r\n            } else {\r\n                this.columns = 2\r\n            }\r\n        }\r\n    }\r\n\r\n    new Gallery()\r\n})\r\n"],"names":["document","addEventListener","constructor","this","columns","heightGallery","items","querySelectorAll","widthItem","heightItem","widthOpenedItem","heightOpenedItem","currentItem","currentY","wheelMod","listeners","checkScreen","setItemsWidth","setItemsPosition","window","forEach","item","event","setActiveItems","dataset","index","classList","contains","closeItems","openItems","changedTouches","clientY","range","vector","y","i","type","sibling","step","Number","toFixed","moveItems","setTimeout","deltaY","screenWidth","innerWidth","add","style","width","remove","modWidth","modHeight","image","querySelector","getBoundingClientRect","height","starty","currenty","transform","startx","groupItems","filter","end","innerHeight","animate","duration","timing","makeEaseInOut","draw","progress","value","bind","el","start","performance","now","requestAnimationFrame","time","timeFraction"],"version":3,"file":"index.7c255afc.js.map"}