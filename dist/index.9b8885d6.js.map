{"mappings":"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","sources":["src/index.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n\r\n    class Gallery {\r\n        constructor() {\r\n            this.columns = 5\r\n            this.heightGallery = 0\r\n\r\n            this.items = [...document.querySelectorAll('.gallery__item')]\r\n            this.widthItem = 0\r\n            this.heightItem = 0\r\n\r\n            this.currentItem = this.items[0]\r\n\r\n            this.listeners()\r\n            this.setItemsWidth()\r\n            this.setItemsPosition()\r\n        }\r\n\r\n        listeners() {\r\n            window.addEventListener('resize', () => {\r\n                this.checkScreen()\r\n                this.setItemsWidth()\r\n                this.setItemsPosition()\r\n            })\r\n\r\n            this.items.forEach(item => {\r\n                item.addEventListener('mouseenter', event => {\r\n                    this.currentItem = item\r\n                })\r\n                item.addEventListener('touchstart', event => {\r\n                    this.currentItem = item\r\n                })\r\n            })\r\n\r\n            window.addEventListener('wheel', event => {\r\n                const vector = event.deltaY === 100 ? 1 : 0\r\n\r\n                for (let i = 0; i < this.columns; i++) {\r\n                    const type = this.currentItem.dataset.index\r\n                    const sibling = i + 1 - type\r\n                    let step\r\n\r\n                    switch(sibling) {\r\n                        case 1:\r\n                            step = 18\r\n                            break;\r\n                        case -1:\r\n                            step = 18\r\n                            break;\r\n                        case 2:\r\n                            step = 12\r\n                            break;\r\n                        case -2:\r\n                            step = 12\r\n                            break;\r\n                        case 3:\r\n                            step = 9\r\n                            break;\r\n                        case -3:\r\n                            step = 9\r\n                            break;\r\n                        case 4:\r\n                            step = 7\r\n                            break;\r\n                        case -4:\r\n                            step = 7\r\n                            break;\r\n                    }\r\n\r\n                    if (sibling === 0) {\r\n                        this.moveItems(type, vector)\r\n                    } else {\r\n                        this.moveItems(+type + sibling, vector, step)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        checkScreen() {\r\n            const width = window.innerWidth\r\n            if (width >= 1200) {\r\n                this.columns = 5\r\n            } else if (width < 1200 && width >= 1024) {\r\n                this.columns = 4\r\n            } else if (width < 1024 && width >= 768) {\r\n                this.columns = 3\r\n            } else {\r\n                this.columns = 2\r\n            }\r\n        }\r\n\r\n        moveItems(type, vector, step = 36) {\r\n            const groupItems = this.items.filter(item => item.dataset.index == type)\r\n            const end = this.heightGallery - window.innerHeight\r\n\r\n            groupItems.forEach((item, index) => {\r\n                let stop = false\r\n                let y = +item.dataset.currenty\r\n\r\n                if (vector) {\r\n                    if (+item.dataset.to - step <= +item.dataset.starty - end) {\r\n                        item.dataset.to = +item.dataset.starty - end\r\n                    } else {\r\n                        item.dataset.to = +item.dataset.to - step\r\n                    }\r\n\r\n                    let n = 1\r\n                    while (n < step) {\r\n                        if (y <= +item.dataset.starty - end) {\r\n                            y = +item.dataset.starty - end\r\n                            item.dataset.currenty = +Number(y).toFixed(5)\r\n                            item.style.transform = `translate3d(${item.dataset.startx}px, ${y}px, 1px)`\r\n                            stop = true\r\n                        }\r\n                        n++\r\n                    }\r\n                    if (!stop) {\r\n                        this.animate(item, {\r\n                            duration: 700,\r\n                            timing: this.makeEaseInOut,\r\n                            draw: function(progress) {\r\n                                const value = +Number(y - step * progress).toFixed(5)\r\n                                if (value <= +item.dataset.starty - end) {\r\n                                    item.dataset.currenty = +item.dataset.starty - end\r\n                                    item.style.transform = `translate3d(${item.dataset.startx}px, ${+item.dataset.starty - end}px, 1px)`\r\n                                } else {\r\n                                    item.dataset.currenty = value\r\n                                    item.style.transform = `translate3d(${item.dataset.startx}px, ${value}px, 1px)`\r\n                                }\r\n                            }.bind(this)\r\n                        })\r\n                    }\r\n                } else {\r\n                    if (+item.dataset.to + step >= +item.dataset.starty) {\r\n                        item.dataset.to = item.dataset.starty\r\n                    } else {\r\n                        item.dataset.to = +item.dataset.to + step\r\n                    }\r\n\r\n                    let n = 1\r\n                    while (n < step) {\r\n                        if (y >= +item.dataset.starty) {\r\n                            y = +item.dataset.starty\r\n                            item.dataset.currenty = +Number(y).toFixed(5)\r\n                            item.style.transform = `translate3d(${item.dataset.startx}px, ${y}px, 1px)`\r\n                            stop = true\r\n                        }\r\n                        n++\r\n                    }\r\n                    if (!stop) {\r\n                        this.animate(item, {\r\n                            duration: 700,\r\n                            timing: this.makeEaseInOut,\r\n                            draw: function(progress) {\r\n                                const value = +Number(y + step * progress).toFixed(5)\r\n                                if (value >= +item.dataset.starty) {\r\n                                    item.dataset.currenty = +item.dataset.starty\r\n                                    item.style.transform = `translate3d(${item.dataset.startx}px, ${+item.dataset.starty}px, 1px)`\r\n                                } else {\r\n                                    item.dataset.currenty = value\r\n                                    item.style.transform = `translate3d(${item.dataset.startx}px, ${value}px, 1px)`\r\n                                }\r\n                            }.bind(this)\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        setItemsWidth() {\r\n            const screenWidth = window.innerWidth\r\n            this.widthItem = +Number(screenWidth / this.columns).toFixed(5)\r\n\r\n            this.items.forEach(item => {\r\n                item.style.width = `${this.widthItem}px`\r\n            })\r\n        }\r\n\r\n        setItemsPosition() {\r\n            let modWidth = 0\r\n            let modHeight = 0\r\n            let type = 0\r\n\r\n            const image = this.items[0].querySelector('.gallery__image')\r\n            this.heightItem = this.heightGallery = +Number(image.getBoundingClientRect().height).toFixed(5) \r\n\r\n            this.items.forEach((item, index) => {\r\n                ++type\r\n                if (modWidth === this.columns) {\r\n                    this.heightGallery += this.heightItem\r\n                    modWidth = 0\r\n                    ++modHeight\r\n                    type = 1\r\n                }\r\n\r\n                item.dataset.to = 0\r\n                item.dataset.index = type\r\n                item.dataset.startx = +Number(this.widthItem * modWidth).toFixed(5)\r\n                item.dataset.starty = +Number(this.heightItem * modHeight).toFixed(5)\r\n                item.dataset.currenty = +Number(this.heightItem * modHeight).toFixed(5)\r\n                item.style.transform = `translate3d(${this.widthItem * modWidth}px, ${this.heightItem * modHeight}px, 1px)`\r\n\r\n                ++modWidth\r\n            })\r\n        }\r\n\r\n        animate(el, {timing, draw, duration}) {\r\n    \r\n            let start = performance.now()\r\n    \r\n            requestAnimationFrame(function animate(time) {\r\n                // timeFraction изменяется от 0 до 1\r\n                let timeFraction = (time - start) / duration\r\n                if (timeFraction > 1) timeFraction = 1\r\n            \r\n                // вычисление текущего состояния анимации\r\n                let progress = timing(timeFraction)\r\n            \r\n                draw(progress) // отрисовать её\r\n            \r\n                if (timeFraction < 1) {\r\n                    requestAnimationFrame(animate)\r\n                } else {\r\n                    // finish\r\n                }\r\n          \r\n            })\r\n        }\r\n\r\n        makeEaseInOut(timeFraction) {\r\n            if (timeFraction < .5)\r\n                return 2 * timeFraction / 2\r\n            else\r\n                return (2 - 2 * (1 - timeFraction)) / 2\r\n        }\r\n    }\r\n\r\n    new Gallery()\r\n})\r\n"],"names":["document","addEventListener","constructor","this","columns","heightGallery","items","querySelectorAll","widthItem","heightItem","currentItem","listeners","setItemsWidth","setItemsPosition","window","checkScreen","forEach","item","event","vector","deltaY","i","type","dataset","index","sibling","step","moveItems","width","innerWidth","groupItems","filter","end","innerHeight","stop","y","currenty","to","starty","n","Number","toFixed","style","transform","startx","animate","duration","timing","makeEaseInOut","draw","progress","value","bind","screenWidth","modWidth","modHeight","image","querySelector","getBoundingClientRect","height","el","start","performance","now","requestAnimationFrame","time","timeFraction"],"version":3,"file":"index.9b8885d6.js.map"}